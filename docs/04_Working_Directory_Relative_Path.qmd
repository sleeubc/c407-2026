---
title: "Working Directory and Relative Path"
author: "Sanghoon Lee"
date: last-modified
date-format: "D MMMM, YYYY"
format:
  revealjs:
    css: c407_slides.css
    width: 1600
    height: 900
    highlight-style: github
    slide-number: true
    incremental: false
---

```{r}
#| label: setup
#| include: false
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
library(kableExtra)
```

## Working Directory

The (current) working directory is the directory R is currently working in.

. . .

The working directory is the default location R uses when reading or writing a file.

. . .

The top of Console pane shows the current working directory.

---

What is your current working folder shown in your RStudio Console?

---

When you open the 'c407' project file, it sets the working directory to be the one where the project file is located, i.e., 'c407' folder.

Open the 'c407' project file.

Confirm that the directory is the one where the project file is located.

---

The working directory is the default location R uses when reading or writing a file.

```{r}
library(tidyverse)
```

```{r}
#| eval: false
bca <- read_rds("bca252.rds")
```

. . .

The command above does not work, since R cannot find the file in the current working folder.

---

## Relevative path

```{r}
bca <- read_rds("Data/bca252.rds")
```

. . .

Confirm in 'Files' pane that the 'bca252.rds' is in 'Data' subfolder from the working directory.

. . .

Note we use '/' rather than '\'.

. . .

- A relative path is shorter than an absolute path.

- It is more portable. For example, even if you move the whole C407 folder to another location, all relative paths within the folder would still work.

---

```{r}
ggplot(mtcars) + geom_point(aes(mpg,hp))
```

---

The following saves the plot in 'c407', the current working folder.
```{r}
#| eval: false
ggsave("mpg_hp.png")
```

. . .

If you want to save the plot in 'Temp' subfolder, use

. . .

```{r}
ggsave("Temp/mpg_hp.png")
```

Confirm in 'Files' pane, that the files are created in the two folders.

---

## Exercises

::: {.small}
Clear memory by clicking Session - Restart R.

Open C407.RProj.

Open '2021_census_pumf_ind.rds' in 'Data' subfolder, and names it to 'pumf'. Use a relative path. Fill in the blank.

```{r}
#| eval: false
pumf <- read_rds(________________________)
```
:::

. . .

::: {.small}
Answer:
```{r}
#| eval: false
pumf <- read_rds('Data/2021_census_pumf_ind.rds')
```
:::

---

The 2021 Census public use microdata file (PUMF) on individuals contains 980,868 records, representing 2.7% of the Canadian population.

It provides substantial amount of information on these individuals sampled to be representative of the whole Canada.

Limitation: the most detailed geographic information is CMA.

Browse the first six rows of data.

```{r}
#| eval: false
pumf %>% head %>% View()
```

---

::: {.scroll-output}
::: {.small}
```{r}
#| echo: false
pumf <- read_rds('Data/2021_census_pumf_ind.rds')
pumf %>% head() %>% kable()
```
:::
:::
